<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏ô‡πâ‡∏≠‡∏á‡πÉ‡∏ö‡∏ö‡∏∏‡∏ç - ‡∏£‡∏û.‡∏™‡∏∞‡πÄ‡∏î‡∏≤</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #0d9488;
            --primary-light: #2dd4bf;
            --accent: #f0fdfa;
            --text-dark: #134e4a;
            --white: #ffffff;
            --shadow: 0 10px 25px -5px rgba(13, 148, 136, 0.2);
        }

        body {
            font-family: 'Prompt', sans-serif;
            background: linear-gradient(135deg, #e0f2f1 0%, #f0fdfa 100%);
            margin: 0; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* Hero Section */
        .hero { text-align: center; padding: 20px; animation: fadeIn 1s ease; }
        .hero img { width: 120px; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.1)); }
        .hero h1 { color: var(--primary); margin: 15px 0 5px; font-size: 1.8rem; }
        .hero p { color: #52796f; font-size: 1rem; }

        /* Floating Button */
        .chat-btn {
            position: fixed; bottom: 30px; right: 30px;
            width: 65px; height: 65px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 50%; box-shadow: var(--shadow);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; z-index: 1000; transition: 0.3s;
        }
        .chat-btn:hover { transform: scale(1.1) rotate(-5deg); }
        .chat-btn img { width: 35px; }

        /* Chat Window */
        .chat-box {
            position: fixed; bottom: 110px; right: 30px;
            width: 380px; height: 600px; max-height: 80vh; max-width: calc(100% - 60px);
            background: var(--white); border-radius: 24px;
            display: none; flex-direction: column; overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15); z-index: 999;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* Header */
        .chat-header {
            background: var(--primary); color: white; padding: 20px;
            display: flex; align-items: center; justify-content: space-between;
        }
        .header-info { display: flex; align-items: center; gap: 12px; }
        .header-info img { width: 40px; height: 40px; background: white; border-radius: 50%; padding: 3px; }
        .header-info h3 { margin: 0; font-size: 1rem; }
        .header-info span { font-size: 0.75rem; opacity: 0.9; }

        /* Body & Messages */
        .chat-content { flex: 1; padding: 20px; overflow-y: auto; background: #f8fafc; display: flex; flex-direction: column; gap: 12px; }
        .msg { max-width: 85%; padding: 12px 16px; border-radius: 18px; font-size: 0.95rem; line-height: 1.5; position: relative; }
        .msg-bot { background: white; color: var(--text-dark); align-self: flex-start; border-bottom-left-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.03); }
        .msg-user { background: var(--primary); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }

        /* Quick Replies */
        .quick-replies { display: flex; gap: 8px; padding: 10px 20px; overflow-x: auto; background: #f8fafc; }
        .q-btn { 
            white-space: nowrap; background: white; border: 1px solid var(--primary-light);
            color: var(--primary); padding: 6px 15px; border-radius: 20px;
            font-size: 0.85rem; cursor: pointer; transition: 0.2s;
        }
        .q-btn:hover { background: var(--primary); color: white; }

        /* Footer */
        .chat-footer { padding: 15px; background: white; display: flex; gap: 10px; border-top: 1px solid #eee; }
        .chat-input { flex: 1; border: none; background: #f1f5f9; padding: 12px 20px; border-radius: 25px; outline: none; font-family: 'Prompt'; }
        .send-btn { background: var(--primary); color: white; border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; }

        /* Animations */
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .typing { font-size: 0.8rem; color: #94a3b8; margin-left: 20px; display: none; }
    </style>
</head>
<body>

    <div class="hero">
        <img src="https://cdn-icons-png.flaticon.com/512/4712/4712109.png" alt="Mascot">
        <h1>‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏™‡∏∞‡πÄ‡∏î‡∏≤</h1>
        <p>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡πÉ‡∏à ‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÑ‡∏î‡πâ 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</p>
    </div>

    <div class="chat-btn" onclick="toggleChat()">
        <img src="https://cdn-icons-png.flaticon.com/512/4712/4712070.png" alt="Icon">
    </div>

    <div class="chat-box" id="chatBox">
        <div class="chat-header">
            <div class="header-info">
                <img src="https://cdn-icons-png.flaticon.com/512/4712/4712109.png" alt="Bot">
                <div>
                    <h3>‡∏ô‡πâ‡∏≠‡∏á‡πÉ‡∏ö‡∏ö‡∏∏‡∏ç</h3>
                    <span><i class="fas fa-circle" style="color: #4ade80; font-size: 8px;"></i> ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏∞</span>
                </div>
            </div>
            <i class="fas fa-times" onclick="toggleChat()" style="cursor: pointer;"></i>
        </div>

        <div class="chat-content" id="chatContent">
            <div class="msg msg-bot">
                ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ üôè ‡∏ô‡πâ‡∏≠‡∏á‡πÉ‡∏ö‡∏ö‡∏∏‡∏ç ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏∞<br>
                ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞
            </div>
        </div>

        <div class="typing" id="typing">‡∏ô‡πâ‡∏≠‡∏á‡πÉ‡∏ö‡∏ö‡∏∏‡∏ç‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö...</div>

        <div class="quick-replies">
            <button class="q-btn" onclick="quickSend('‡∏Ç‡∏°‡∏¥‡πâ‡∏ô‡∏ä‡∏±‡∏ô‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏∞‡πÑ‡∏£?')">‡∏Ç‡∏°‡∏¥‡πâ‡∏ô‡∏ä‡∏±‡∏ô</button>
            <button class="q-btn" onclick="quickSend('‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏¢‡∏≤‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏ß‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢')">‡πÅ‡∏Å‡πâ‡∏õ‡∏ß‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢</button>
            <button class="q-btn" onclick="quickSend('‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏ú‡∏ô‡∏Å‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÅ‡∏ú‡∏ô‡πÑ‡∏ó‡∏¢')">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</button>
        </div>

        <div class="chat-footer">
            <input type="text" id="userInput" class="chat-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." onkeypress="if(event.key==='Enter') sendMsg()">
            <button class="send-btn" onclick="sendMsg()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        // ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á Google Apps Script ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyQKDaHWzzb2PIuend4HS62cDD0qrGQmtFOzvKMYBzNGcv7Wj4LxVsTz_HfAmtvJbbzsA/exec";

        function toggleChat() {
            const box = document.getElementById('chatBox');
            box.style.display = (box.style.display === 'flex') ? 'none' : 'flex';
        }

        function appendMsg(text, side) {
            const content = document.getElementById('chatContent');
            const div = document.createElement('div');
            div.className = `msg msg-${side}`;
            div.innerHTML = text.replace(/\n/g, '<br>');
            content.appendChild(div);
            content.scrollTop = content.scrollHeight;
        }

        function quickSend(text) {
            document.getElementById('userInput').value = text;
            sendMsg();
        }

        async function sendMsg() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            if (!text) return;

            appendMsg(text, 'user');
            input.value = '';
            
            const typing = document.getElementById('typing');
            typing.style.display = 'block';

            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' }, // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô CORS
                    body: JSON.stringify({ message: text })
                });
                
                const data = await response.json();
                typing.style.display = 'none';

                if (data.status === 'success') {
                    appendMsg(data.reply, 'bot');
                } else {
                    appendMsg("‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡πà‡∏∞ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß", 'bot');
                }
            } catch (err) {
                typing.style.display = 'none';
                appendMsg("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏∞", 'bot');
            }
        }
    </script>
</body>
</html>
